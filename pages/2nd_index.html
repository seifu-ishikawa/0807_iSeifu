<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è‹±å˜èªæš—è¨˜ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ---------- ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒï¼ˆCSSå¤‰æ•°ï¼‰ ---------- */
:root{
  --bg-color:#ffffff;
  --text-color:#111111;
  --card-bg:#f5f5f5;
  --card-text:#111111;
  --accent-color:#007bff;
}
body.dark{
  --bg-color:#121212;
  --text-color:#e0e0e0;
  --card-bg:#1e1e1e;
  --card-text:#e0e0e0;
  --accent-color:#90caf9;
}

/* ---------- åŸºæœ¬ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ---------- */
html,body{
  height:100%;
  margin:0;
  background:var(--bg-color);
  color:var(--text-color);
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue","Segoe UI",sans-serif;
  transition:background .3s,color .3s;
}
.container{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100%;
  padding:1rem;
  box-sizing:border-box;
}

/* ---------- ã‚«ãƒ«ãƒ¼ã‚»ãƒ« ---------- */
.carousel{
  position:relative;
  width:320px;
  max-width:90vw;
  height:200px;
  overflow:hidden;
  border-radius:12px;
}
.track{
  display:flex;
  height:100%;
  transition:transform .5s ease-in-out;
}

/* ---------- ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ•ãƒªãƒƒãƒ—ï¼‰ ---------- */
.card{
  flex:0 0 100%;               /* ã‚«ãƒ¼ãƒ‰ã¯ã‚¹ãƒ©ã‚¤ãƒ‰å¹…ã¨åŒã˜ã‚µã‚¤ã‚º */
  position:relative;
  perspective:1000px;          /* 3D åŠ¹æœ */
  cursor:pointer;
  user-select:none;
}
.card-inner{
  width:100%;
  height:100%;
  transition:transform .6s;
  transform-style:preserve-3d;
  position:relative;
}
.card.is-flipped .card-inner{
  transform:rotateY(180deg);
}
.card-face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:12px;
  backface-visibility:hidden;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  background:var(--card-bg);
  color:var(--card-text);
  box-shadow:0 4px 12px rgba(0,0,0,.2);
  padding:1rem;
  box-sizing:border-box;
}
.card-face.front{
  /* è¡¨å´ã¯ãã®ã¾ã¾ */
}
.card-face.back{
  transform:rotateY(180deg);
}
.card-face h2{
  margin:0;
  font-size:2rem;
}
.card-face p{
  margin:.5rem 0 0;
  font-size:1.3rem;
}

/* ---------- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ---------- */
.nav-button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:40px;
  height:40px;
  border:none;
  border-radius:50%;
  background:var(--accent-color);
  color:#fff;
  font-size:1.2rem;
  cursor:pointer;
  opacity:.75;
  transition:opacity .2s;
}
.nav-button:hover{opacity:1;}
.nav-button.prev{left:-20px;}
.nav-button.next{right:-20px;}

/* ---------- ãƒšãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ ---------- */
.pagination{
  margin-top:.75rem;
  display:flex;
  gap:6px;
}
.dot{
  width:10px;
  height:10px;
  background:var(--accent-color);
  border-radius:50%;
  opacity:.4;
  cursor:pointer;
}
.dot.active{opacity:1;}

/* ---------- ãƒ†ãƒ¼ãƒåˆ‡æ›¿ãƒœã‚¿ãƒ³ ---------- */
.theme-toggle{
  position:fixed;
  top:1rem;
  right:1rem;
  background:none;
  border:none;
  font-size:1.5rem;
  cursor:pointer;
}
</style>
</head>
<body>
<div class="container">
  <div class="carousel" aria-label="è‹±å˜èªã‚«ãƒ«ãƒ¼ã‚»ãƒ«">
    <div class="track" id="track"></div>
    <button class="nav-button prev" aria-label="å‰ã¸" id="prevBtn">&#9664;</button>
    <button class="nav-button next" aria-label="æ¬¡ã¸" id="nextBtn">&#9654;</button>
  </div>
  <div class="pagination" id="pagination"></div>
</div>

<button class="theme-toggle" id="themeToggle" aria-label="ãƒ†ãƒ¼ãƒåˆ‡æ›¿">ğŸŒ™</button>

<script>
/* ----------------- 30æšã®ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ ----------------- */
const wordList = [
  {en:"apple",    ja:"ã‚Šã‚“ã”"},
  {en:"book",     ja:"æœ¬"},
  {en:"cat",      ja:"çŒ«"},
  {en:"dog",      ja:"çŠ¬"},
  {en:"egg",      ja:"åµ"},
  {en:"flower",   ja:"èŠ±"},
  {en:"guitar",   ja:"ã‚®ã‚¿ãƒ¼"},
  {en:"house",    ja:"å®¶"},
  {en:"ice",      ja:"æ°·"},
  {en:"juice",    ja:"ã‚¸ãƒ¥ãƒ¼ã‚¹"},
  {en:"key",      ja:"éµ"},
  {en:"lion",     ja:"ãƒ©ã‚¤ã‚ªãƒ³"},
  {en:"mountain", ja:"å±±"},
  {en:"night",    ja:"å¤œ"},
  {en:"orange",   ja:"ã‚ªãƒ¬ãƒ³ã‚¸"},
  {en:"pencil",   ja:"é‰›ç­†"},
  {en:"queen",    ja:"å¥³ç‹"},
  {en:"rain",     ja:"é›¨"},
  {en:"sun",      ja:"å¤ªé™½"},
  {en:"tree",     ja:"æœ¨"},
  {en:"umbrella", ja:"å‚˜"},
  {en:"violin",   ja:"ãƒã‚¤ã‚ªãƒªãƒ³"},
  {en:"water",    ja:"æ°´"},
  {en:"xylophone",ja:"æœ¨ç´"},
  {en:"yogurt",   ja:"ãƒ¨ãƒ¼ã‚°ãƒ«ãƒˆ"},
  {en:"zebra",    ja:"ã‚·ãƒã‚¦ãƒ"},
  {en:"phone",    ja:"é›»è©±"},
  {en:"computer", ja:"ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿"},
  {en:"window",   ja:"çª“"},
  {en:"river",    ja:"å·"}
];

/* ----------------- ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ç”Ÿæˆ ----------------- */
const track = document.getElementById('track');
const pagination = document.getElementById('pagination');
let currentIndex = 0;

/* ã‚«ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’ä½œæˆ */
function initCarousel() {
  // ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆ/ãƒãƒƒã‚¯ã‚’æŒã¤æ§‹é€ ï¼‰ã‚’ä½œã‚‹
  track.innerHTML = wordList.map(item => `
    <div class="card">
      <div class="card-inner">
        <div class="card-face front"><h2>${item.en}</h2></div>
        <div class="card-face back"><p>${item.ja}</p></div>
      </div>
    </div>
  `).join('');

  // ãƒšãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ï¼ˆãƒ‰ãƒƒãƒˆï¼‰ã‚’ä½œã‚‹
  pagination.innerHTML = wordList.map((_, i) => `
    <div class="dot" data-index="${i}"></div>
  `).join('');

  // ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ãƒªãƒƒãƒ—
  track.addEventListener('click', e => {
    const card = e.target.closest('.card');
    if (card) {
      card.classList.toggle('is-flipped');
    }
  });

  // ãƒ‰ãƒƒãƒˆã‚¯ãƒªãƒƒã‚¯ã§ç›´æ¥ã‚¸ãƒ£ãƒ³ãƒ—
  pagination.addEventListener('click', e => {
    if (e.target.classList.contains('dot')) {
      const idx = Number(e.target.dataset.index);
      currentIndex = idx;
      updateCarousel();
    }
  });

  updateCarousel(); // åˆæœŸè¡¨ç¤º
}

/* ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ä½ç½®ãƒ»ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿æ›´æ–° */
function updateCarousel() {
  // ã‚«ãƒ¼ãƒ‰ãŒè£è¿”ã£ã¦ã„ãŸã‚‰æ­£é¢ã«æˆ»ã™
  document.querySelectorAll('.card.is-flipped')
          .forEach(c => c.classList.remove('is-flipped'));

  // ã‚¹ãƒ©ã‚¤ãƒ‰ä½ç½®
  track.style.transform = `translateX(-${currentIndex * 100}%)`;

  // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ‰ãƒƒãƒˆã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
  const dots = pagination.querySelectorAll('.dot');
  dots.forEach(dot => {
    dot.classList.toggle('active', Number(dot.dataset.index) === currentIndex);
  });
}

/* å‰ãƒ»æ¬¡ãƒœã‚¿ãƒ³ã®ãƒãƒ³ãƒ‰ãƒ© */
document.getElementById('prevBtn').addEventListener('click', () => {
  currentIndex = (currentIndex - 1 + wordList.length) % wordList.length;
  updateCarousel();
});
document.getElementById('nextBtn').addEventListener('click', () => {
  currentIndex = (currentIndex + 1) % wordList.length;
  updateCarousel();
});

/* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§â†/â†’æ“ä½œ */
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowLeft') {
    document.getElementById('prevBtn').click();
  } else if (e.key === 'ArrowRight') {
    document.getElementById('nextBtn').click();
  }
});

/* ----------------- ãƒ†ãƒ¼ãƒåˆ‡æ›¿ ----------------- */
const themeToggle = document.getElementById('themeToggle');

function setTheme(t) {
  if (t === 'dark') {
    document.body.classList.add('dark');
    themeToggle.textContent = 'â˜€ï¸';
  } else {
    document.body.classList.remove('dark');
    themeToggle.textContent = 'ğŸŒ™';
  }
  localStorage.setItem('theme', t);
}

/* ä¿å­˜ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã‚’å¾©å…ƒ */
const saved = localStorage.getItem('theme') || 'light';
setTheme(saved);

/* ãƒœã‚¿ãƒ³ã§ãƒˆã‚°ãƒ« */
themeToggle.addEventListener('click', () => {
  const newTheme = document.body.classList.contains('dark') ? 'light' : 'dark';
  setTheme(newTheme);
});

/* ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«åˆæœŸåŒ– */
window.addEventListener('DOMContentLoaded', initCarousel);
</script>
</body>
</html>